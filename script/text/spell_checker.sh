#! /bin/bash
#==============================================================================
# 
#==============================================================================
# Description.......: Spell checker for text files
# Author............: Data Precog
# Email.............: info@dataprecog.com
# Date..............: 2024.05.11
# Version...........: 1.0

#==============================================================================
# Usage
#==============================================================================
# ./spell_checker.sh <input_text_file>

#==============================================================================
# Process
#==============================================================================
# 1. Loads the text file with one word per line
# 2. Convert all alphabetic characters to lowercase
# 3. Sorts the file alphabetically
# 4. Eliminates any duplicate words
# 5. Lists all words resulting from the process above which are not present in the dictionary file

#================================================================================
# Dependencies 
#================================================================================
# words file  	(located in /usr/share/dict/words)
# wportuguese  	(located in /usr/share/dict/portuguese. Obtainable on debian based systems via: sudo apt install wportuguese. 
#					for any other language use the appropriate package/word list file.
# grep
# sed
# sort
# uniq

#================================================================================
#
#================================================================================


#================================================================================
# Global Constants
#================================================================================

#================================================================================
# Global Variables
#================================================================================
INPUT_FILE="$1"

#================================================================================
# Logging
#================================================================================

#================================================================================
# Main Function
#================================================================================
main() {
	spell_check_english
	# spell_check_portuguese
}


#=============================================================================
# Function spell_check_english:   Spell checking using the English language
#=============================================================================
spell_check_english() {
	grep -F -x -v -f /usr/share/dict/words <( grep -o '\w*' $INPUT_FILE | sed 's/.*/\L&/g' | sort | uniq -u)
}

#=============================================================================
# Function spell_check_portuguese:   Spell checking using the Portuguese language
#=============================================================================
spell_check_portuguese() {
	grep -F -x -v -f /usr/share/dict/portuguese <( grep -o '\w*' $INPUT_FILE | sed 's/.*/\L&/g' | sort | uniq -u)
}

#================================================================================
# Main Function call at the end of the script
#================================================================================
main "$@"

#================================================================================
# EOF
#================================================================================
